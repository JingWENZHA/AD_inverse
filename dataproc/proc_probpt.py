import scipy.io
import math
import os
import json
import numpy as np

if __name__ == "__main__":
    prob_pt = ["002_S_0413", "002_S_1261", "002_S_4213", "002_S_4229", "002_S_4654", "002_S_4799", "003_S_1122", "003_S_2374", "003_S_4119", "003_S_4441", "006_S_0498", "006_S_0731", "006_S_4485", "007_S_2394", "007_S_4272", "007_S_4387", "007_S_4620", "007_S_4637", "009_S_0751", "011_S_0021", "011_S_4278", "011_S_4547", "011_S_4893", "012_S_4094", "012_S_4188", "012_S_4643", "013_S_2389", "013_S_4580", "016_S_4902", "016_S_5057", "018_S_2133", "018_S_2155", "018_S_2180", "018_S_4399", "018_S_4400", "018_S_4868", "019_S_4293", "019_S_4367", "021_S_0626", "022_S_2263", "022_S_2379", "022_S_5004", "023_S_1190", "024_S_4084", "024_S_4674", "027_S_0120", "027_S_2183", "027_S_2219", "027_S_2245", "027_S_2336", "027_S_4869", "027_S_4919", "027_S_5277", "029_S_2395", "029_S_4290", "029_S_4384", "031_S_0618", "031_S_2018", "031_S_2233", "031_S_4021", "031_S_4149", "032_S_1169", "032_S_2119", "032_S_4429", "033_S_0734", "033_S_1016", "033_S_4176", "033_S_4179", "035_S_0555", "035_S_4114", "035_S_4414", "036_S_2380", "036_S_4491", "037_S_0377", "037_S_4028", "037_S_4214", "037_S_4302", "037_S_4410", "041_S_0679", "041_S_1418", "041_S_4037", "041_S_4143", "041_S_4200", "041_S_4271", "041_S_4513", "041_S_4876", "053_S_4813", "068_S_0127", "068_S_2187", "068_S_4332", "094_S_2238", "098_S_0896", "098_S_4275", "098_S_4506", "099_S_4076", "100_S_0069", "100_S_4556", "109_S_2200", "114_S_0416", "114_S_4404", "114_S_5234", "116_S_4043", "116_S_4199", "116_S_4453", "116_S_4483", "116_S_4855", "126_S_0680", "126_S_4507", "126_S_4891", "126_S_5214", "127_S_1427", "127_S_2234", "127_S_4148", "127_S_4197", "127_S_4210", "127_S_4604", "127_S_4765", "128_S_2002", "128_S_2123", "128_S_2130", "128_S_2220", "128_S_4607", "129_S_2332", "129_S_4369", "129_S_4396", "129_S_4422", "130_S_0969", "130_S_2373", "130_S_2403", "130_S_4294", "130_S_4343", "130_S_4352", "130_S_4417", "130_S_4817", "135_S_4309", "135_S_4356", "135_S_4446", "135_S_4489", "135_S_4598", "135_S_4722", "135_S_4723", "137_S_4299", "137_S_4351", "137_S_4482", "137_S_4520", "137_S_4536", "137_S_4631", "137_S_4862", "141_S_1052", "141_S_1378", "141_S_2333", "141_S_4160", "941_S_4036", "941_S_4100", "941_S_4187", "941_S_4292", "941_S_4365"];
    mat = scipy.io.loadmat('/Users/enze/Desktop/Zhang2022/AD_inverse/Data/data_20220915.mat')

    ptID_stacked_20220915 = mat["ptID_stacked_20220915"][:,0]

    for i in range(184):
        ptID_stacked_20220915[i] = ptID_stacked_20220915[i][0][0][0]


    # normal_pt_id = np.setxor1d(ptID_stacked_20220915, prob_pt)
    normal_pt_id = np.array(["011_S_4827", "011_S_4827", "014_S_4576", "014_S_4576", "014_S_4576", "014_S_4576", "014_S_4576", "018_S_4313", "018_S_4313", "018_S_4313", "018_S_4313", "018_S_4313", "018_S_4313", "031_S_4721", "031_S_4721", "032_S_0677", "032_S_0677", "032_S_0677", "032_S_0677", "032_S_0677", "032_S_0677", "041_S_4974", "041_S_4974", "041_S_4974", "041_S_4974", "068_S_4067", "068_S_4067", "068_S_4067", "068_S_4424", "068_S_4424", "068_S_4424", "068_S_4431", "068_S_4431", "068_S_4431", "094_S_4234", "094_S_4234", "094_S_4234", "094_S_4234", "094_S_4234", "127_S_4198", "127_S_4198", "127_S_4198", "127_S_4198", "130_S_4415", "130_S_4415", "130_S_4415", "130_S_4415", "141_S_0767", "141_S_0767", "141_S_0767", "141_S_0767", "141_S_0767"])
    normal_pt_id = np.unique(normal_pt_id)
    print(ptID_stacked_20220915,normal_pt_id)
    normal_pt_idx = []
    for i in range(len(normal_pt_id)):
        normal_pt_idx.append(np.where(ptID_stacked_20220915 == normal_pt_id[i])[0][0])
    print(normal_pt_idx)

    np.save('/Users/enze/Desktop/Zhang2022/AD_inverse/Data/20221030normal_pt_idx.npy', normal_pt_idx)
    np.save('/Users/enze/Desktop/Zhang2022/AD_inverse/Data/20221030normal_pt_id.npy', normal_pt_id)



